# SilverStripe Static Site Connector

This connector extracts content from another website by crawling it and parsing its DOM structure, rather than connecting to an internal API.
Although this has the disadvantage of leaving it unable to extract any information or structure not represented in the outputted HTML of the site, it requires no special access, nor does it rely on particular back-end systems.
This makes it suited for experimental site imports, as well as connections to more websites generated by obscure CMS's.

## How it works

To import a site is a 3-step process:

 1. Crawl
 2. Import
 3. Rewrite Links

 * A list of URLs are fetched and extracted from the site using [PHPCrawl](http://cuab.de/), and cached under the assets directory.
 * Each cached URL corresponds to a page that the module will attempt to import.
 * Page content is imported page-by-page using CURL, and the desired DOM elements extracted via configurable CSS selectors. [phpQuery](http://code.google.com/p/phpquery/) is used for this purpose.

This module requires the [PHP Sempahore](http://php.net/manual/en/book.sem.php) functions.
These are installed by default on Debian and some OS X PHP distributions, but if you're using Macports you'll need to add the `+ipc` flag when installing php5.

If compiling PHP from source you need to pass three additional flags to PHP's configure script:

	./configure <usual flags> '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg'

Once that's done, you can use [Composer](http://getcomposer.org) to add the module to your SilverStripe project:

    #> composer require silverstripe/staticsiteconnector

Please see the [Migration](docs/en/migration.md) document, that describes how to configure the tool to perform a site-scrape migration.

License
-------

This code is available under the BSD license, with the exception of the [PHPCrawl](http://cuab.de/) library, bundled with this module which is GPL version 2.
